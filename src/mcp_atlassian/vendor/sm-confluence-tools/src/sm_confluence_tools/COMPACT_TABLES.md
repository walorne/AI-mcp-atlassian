# Компактные таблицы в Markdown

## Проблема

Библиотека `confluence-markdown-exporter` при конвертации HTML-таблиц в markdown вызывает `tabulate(..., tablefmt="pipe")`. В результате:

- разделитель подстраивается под ширину колонок: длинная строка вида  
  `|----:|:----------------------------------------------------------------------|:--------------|...`;
- ячейки выравниваются пробелами, объём markdown раздувается.

Требовалось: короткий разделитель `| --- | --- | --- |` и ячейки без выравнивания пробелами.

## Решение

Библиотеку не меняем. В нашем классе `SmConverter` (наследник конвертера библиотеки) переопределён метод **`convert_table`** в [page.py](page.py).

**Идея:** подготовку данных оставляем как в библиотеке (строки таблицы, учёт rowspan/colspan через `pad()`, конвертация содержимого ячеек через `self.convert()`), а финальную сборку строки markdown делаем сами — без вызова `tabulate`.

**Важно:**

1. Таблицы с классом `metadata-summary-macro` (отчёт свойств страницы) по-прежнему отдаём в базовый обработчик: `convert_page_properties_report(...)` — поведение не трогаем.
2. Для остальных таблиц:
   - собираем `rows` из элемента `<table>`;
   - вызываем `pad(rows)` из `confluence_markdown_exporter.utils.table_converter` (публичная функция библиотеки);
   - конвертируем ячейки: `self.convert(str(cell))`;
   - выводим: строка заголовка, разделитель `| --- | --- | ... |` по числу колонок, строки данных; у каждой ячейки вызываем `.strip()` — убираем выравнивание пробелами.

**Зависимости:** один дополнительный импорт — `pad` из `confluence_markdown_exporter.utils.table_converter`. Остальная логика в одном методе `convert_table` в `page.py`.

## Тест

В [tests/test_table_compact.py](../../tests/test_table_compact.py) проверяется:

- в markdown есть короткий разделитель `| --- | --- |`;
- есть ожидаемые строки заголовка и данных;
- строка-разделитель в точности `| --- | --- |` (без длинного выравнивания).

Запуск: `pytest tests/test_table_compact.py -v`.
